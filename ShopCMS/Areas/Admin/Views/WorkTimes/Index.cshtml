@model IEnumerable<Domain.ShoppingWorkTime>
@using PagedList.Mvc;
@using ahmadi.Infrastructure.Helper
@using CoreLib.Infrastructure;
<title>مدیریت روزهای کاری فروشگاه</title>
@{
    var settings = ViewBag.settings as IEnumerable<SelectListItem>;
}
<style>
    .form-group.has-feedback span {
        display: inline-block;
    }

    .dropdown-menu > li > a {
        text-align: center;
    }

    .bootstrap-select.btn-group .dropdown-menu li a span.check-mark {
        display: none !important;
    }

    .ProductCategories {
        list-style-type: none;
        padding: 0;
        margin: 0;
    }

    .x_panel .nav.navbar-nav > li > a {
        color: #fff !important;
    }

    .navbar-right .btn-success {
        padding: 2px 8px;
        border-radius: 3px;
        margin-bottom: 10px;
    }

        .navbar-right .btn-success:hover {
            background-color: #ea7526;
        }
</style>

@section Header{
    @*View*@
    <link href="~/Areas/Admin/Content/Stylesheets/View/ProductCategories.css" rel="stylesheet" />
    <link href="~/Areas/Admin/Content/Scripts/Component/jquery-ui.min.css" rel="stylesheet" />
    @*Bootstrap Select*@
    <link href="~/areas/admin/content/scripts/component/bootstrp-dropdown/bootstrap-select.min.css" rel="stylesheet" />
}

<div class="x_panel">
    <div class="x_content">
        <div class="body-content">

            <div class="Pagecontent">
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                    <a href="@Url.Action("Index","WorkTimes")">
                        مدیریت روزهای کاری فروشگاه


                    </a>
                </div>
                <div class="clearfix"></div>
                <br /><br />



                <div>
                    <br />
                    @if (ViewBag.AddPermission)
                    {

                        <ul class="nav navbar-nav navbar-right">
                            <li>

                                <a href="javascript:;" class="btn-success user-profile dropdown-toggle" data-toggle="dropdown">
                                    <span class="glyphicon glyphicon-plus"></span>
                                    تعریف زمان جدید
                                </a>
                                <ul class="dropdown-menu dropdown-usermenu pull-right">
                                    @foreach (var item in settings)
                                    {
                                        <li>
                                            <a href="/Admin/WorkTimes/Create/@item.Value">@item.Text</a>
                                        </li>
                                    }


                                </ul>
                            </li>
                        </ul>
 
                    }
                    <div class="clearfix"></div><br />
                    <div>
                        @Html.DropDownList("id", ViewBag.settings as IEnumerable<SelectListItem>, "--انتخاب نمایید--", new { @class = "form-control", style = "max-width:320px" })<br />
                    </div>
                    <div class="table-responsive">
                        <table class="table">
                            <tr>
                                <th>
                                    روز هفته
                                </th>
                                <th>
                                    ساعت شروع
                                </th>
                                <th>
                                    ساعت پایان
                                </th>
                                <th>
                                    فعال؟
                                </th>
                                <th></th>
                            </tr>

                            @foreach (var item in Model.OrderBy(x => x.WeekDay).ThenBy(x => x.StartTime).ThenBy(x => x.EndTime))
                            {
                                <tr>
                                    <td>
                                        @CoreLib.Infrastructure.DateTime.DateTimeConverter.GetDayOfWeek(item.WeekDay)
                                    </td>
                                    <td>
                                        @item.StartTime.ToString(@"hh\:mm")
                                    </td>
                                    <td>
                                        @item.EndTime.ToString(@"hh\:mm")
                                    </td>
                                    <td>
                                        @if (item.IsActive)
                                        {
                                            <span>فعال</span>
                                        }
                                        else
                                        {
                                            <span>غیرفعال</span>
                                        }
                                    </td>
                                    <td>
                                        @if (ViewBag.EditPermission)
                                        {
                                            <a class="btn btn-success" href="@Url.Action("Edit", new { id = item.Id })"><span class="glyphicon glyphicon-edit"></span> ویرایش </a>
                                        }
                                        @if (ViewBag.DeletePermission)
                                        {
                                            <a class="btn btn-success" href="@Url.Action("Delete", new { id = item.Id })"><span class="glyphicon glyphicon-edit"></span> حذف </a>
                                        }


                                    </td>
                                </tr>
                            }

                        </table>
                    </div>

                </div>



            </div>
        </div>

        @section Scripts{

            <script>
                $(document).ready(function () {
                    $("#id").change(function () {
                        if ($(this).val())
                            window.location.href = "/Admin/WorkTimes?id=" + $(this).val();
                        else
                            window.location.href = "/Admin/WorkTimes";
                    });
                });
            </script>
        }
    </div>
</div>