@model Domain.Product
@using ahmadi.Infrastructure.Helper

<title>@(Model == null ? " ایجاد " : " ویرایش ")  محصول </title>

@{
    bool validType = true;
    if (Model != null)
    {
        if (Model.ProductTypeId > 2)
        {
            validType = false;

        }
    }
    var HelpModuleSection = ViewBag.HelpModuleSection as Domain.HelpModuleSection;
    var ProductRankGroupSelect = ViewBag.ProductRankGroupSelect as IEnumerable<Domain.ProductRankGroupSelect>;
    var ProductRankSelectValue = ViewBag.ProductRankSelectValue as IEnumerable<Domain.ProductRankSelectValue>;
    var setting = ViewBag.setting as Domain.Setting;
    var ProductAttributeGroups = ViewBag.ProductAttributeGroups as IEnumerable<Domain.ProductAttributeGroupSelect>;
}

@section Header{
    <link href="~/Areas/Admin/Content/Stylesheets/View/Products.css?v=1.22" rel="stylesheet" />
    @*Bootstrap Select*@
    <link href="~/areas/admin/content/scripts/component/bootstrp-dropdown/bootstrap-select.min.css" rel="stylesheet" />
    @*Persian Calender*@
    <link href="~/Areas/Admin/Content/Stylesheets/Component/calendar.css" rel="stylesheet" />
    <link href="~/Areas/Admin/Content/Scripts/Component/jquery-ui.min.css" rel="stylesheet" />
}

<div class="x_panel">
    <div class="x_content">

        <div class="text-left"><a class="btn btn-success" href="@Url.Action("Index")"> بازگشت به لیست <span class="glyphicon glyphicon-chevron-left"></span></a></div>
        @if (ViewBag.Error != null)
        {
            <p class="alert alert-danger">@ViewBag.Error</p>
        }
        @if (Model != null)
        {
            <p class="alert alert-success"><span class="glyphicon glyphicon-check"></span> ثبت شده. در حالت ویرایش </p>
        }
        @using (Html.BeginForm("Create", "Products", FormMethod.Post, new { id = "AddForm" }))
        {
            @Html.AntiForgeryToken()
            <div class="col-md-6">
                <h1 style="display:inline-block;font-size: 2em;" class="box-title">
                    @(Model == null ? " ایجاد " : " ویرایش ")  محصول
                </h1>
            </div>
            <div class="col-md-6" style="padding: 0;margin-top: 15px;text-align:left">
                <div class="form-group">
                    <input type="submit" value="@(Model!=null?"ویرایش":"ایجاد")" style="width:140px" class="btn btn-primary" />
                </div>
            </div>
            <div class="clearfix"></div>



            <div class="form-horizontal">
                @Html.ValidationSummary(false, "", new { @class = "text-danger" })

                <ul id="prtabs" class="nav nav-tabs">
                    <li class="active"><a data-toggle="tab" href="#type">نوع</a></li>
                    <li><a data-toggle="tab" href="#base">مشخصات پایه</a></li>
                    @if (validType)
                    {
                        <li><a data-toggle="tab" href="#package">بسته بندی</a></li>
                    }
                    <li><a data-toggle="tab" href="#pack" class="hide">محصولات پک</a></li>
                    @if (Model != null)
                    {
                        @Html.HiddenFor(x => x.InsertDate)
                        @Html.Hidden("PageAddress", Model.PageAddress)
                        @Html.Hidden("ProductId", Model.Id)
                        @Html.Hidden("ProductCatId", Model.ProductCategories.First().Id);

                        <li><a data-toggle="tab" href="#files" class="@(Model.ProductTypeId==3?"":"hide")">فایل ها</a></li>
                        <li><a data-toggle="tab" href="#courses" class="@(Model.ProductTypeId==4?"":"hide")">دوره آموزشی (ویدئو)</a></li>
                        <li><a data-toggle="tab" href="#attributes">خصوصیات بیشتر</a></li>
                        <li><a data-toggle="tab" href="#ranks">امتیازدهی</a></li>
                        <li><a data-toggle="tab" href="#tags">برچسب ها</a></li>
                    }
                </ul>

                <div class="tab-content">
                    <div id="type" class="tab-pane fade in active">
                        <div id="PrtypeSelect">
                            <div class="col-md-2">
                                <label>نوع محصول : </label>
                            </div>
                            <div class="col-md-8">
                                @Html.DropDownList("ProductTypeId", ViewBag.ProductTypeList as IEnumerable<SelectListItem>, new { @class = "form-control selectpicker", data_live_search = "true" })
                            </div>
                            <div class="clearfix"></div><br />
                        </div>
                        @if (Model == null)
                        {
                            <div id="PrCatSelect">
                                <div class="col-md-2">
                                    <label>دسته بندی محصول: </label>
                                </div>

                                <div class="col-md-8">

                                    <div id="ProductCategoryForCreate">

                                        @Html.Action("OpenProductCategories", "Products", new { CurrentCatId = ViewBag.CurrentCatId, ProductTypeId = 1 })
                                    </div>
                                </div>

                                <div class="clearfix"></div><br />
                            </div>
                        }


                        <div id="SellerSelect">
                            <div class="col-md-2">
                                <label>فروشنده : </label>
                            </div>
                            <div class="col-md-8">
                                @Html.DropDownList("SellerId", ViewBag.SellerList as IEnumerable<SelectListItem>, new { @class = "form-control selectpicker", data_live_search = "true", multiple = "multiple" })

                            </div>
                            <div class="clearfix"></div><br />
                        </div>
                        <div id="TaxSelect">
                            <div class="col-md-2">
                                <label>مالیات : </label>
                            </div>
                            <div class="col-md-8">
                                @Html.DropDownList("TaxId", ViewBag.TaxList as IEnumerable<SelectListItem>, "--هیچکدام--", new { @class = "form-control selectpicker", data_live_search = "true" })
                            </div>
                            <div class="clearfix"></div><br />
                        </div>
                        @{
                            CoreLib.ViewModel.Xml.XMLReader readXml = new CoreLib.ViewModel.Xml.XMLReader(setting.StaticContentDomain);
                            var languages = readXml.ListOfXLanguage();
                        }
                        @if (languages.Count == 1)
                        {
                            @Html.Hidden("LanguageId", languages.First().Id)
                        }
                        else
                        {
                            <div>
                                @Html.LabelFor(model => model.LanguageId, "زبان ( وب سایت )", htmlAttributes: new { @class = "control-label col-md-3" })
                                <div class="col-md-9">
                                    @Html.DropDownList("LanguageId", null, htmlAttributes: new { @class = "form-control" })
                                    @Html.ValidationMessageFor(model => model.LanguageId, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        }
                        <div id="PrCodeSelect">

                            <div class="col-md-2">
                                <label>کد کالا :</label>
                            </div>

                            <div class="col-md-8">
                                @Html.EditorFor(model => model.Code, new { htmlAttributes = new { placeholder = "کد کالا", @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.Code, "", new { @class = "text-danger" })
                            </div>
                            <div class="clearfix"></div><br />
                        </div>
                        <div id="PrScratchCodeSelect">

                            <div class="col-md-2">
                                <label>کد اسکرچ :</label>
                            </div>

                            <div class="col-md-8">
                                @Html.EditorFor(model => model.ScratchCode, new { htmlAttributes = new { placeholder = "کد اسکرچ", @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.ScratchCode, "", new { @class = "text-danger" })
                            </div>
                            <div class="clearfix"></div><br />
                        </div>
                        @if (Model != null)
                        {
                            <div>
                                <div class="col-md-2">
                                    <label>وضعیت تایید محصول:</label>
                                </div>
                                <div class="col-md-8">
                                    @Html.DropDownList("state", ViewBag.stateList as List<SelectListItem>, null, new { @class = "form-control" })
                                </div>

                                <div class="clearfix"></div><br />
                            </div>
                            <div>

                                @Html.CheckBoxFor(model => model.IsActive, new { @checked = Model.IsActive, @class = "js-switch" }) فعال
                            </div>
                        }
                    </div>
                    <div id="base" class="tab-pane fade">
                        <div>
                            <div class="form-group has-feedback col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                @Html.EditorFor(model => model.Name, new { htmlAttributes = new { placeholder = "نام کالا", @class = "form-control" } })
                                <span class="fa fa-bold form-control-feedback right" aria-hidden="true"></span>
                                @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group has-feedback col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                @Html.EditorFor(model => model.LatinName, new { htmlAttributes = new { placeholder = "نام لاتین کالا", @class = "form-control" } })
                                <span class="fa fa-language form-control-feedback right" aria-hidden="true"></span>
                                @Html.ValidationMessageFor(model => model.LatinName, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group has-feedback col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                @Html.EditorFor(model => model.Title, new { htmlAttributes = new { placeholder = "عنوان کالا", @class = "form-control" } })
                                <span class="fa fa-bold form-control-feedback right" aria-hidden="true"></span>
                                @Html.ValidationMessageFor(model => model.Title, "", new { @class = "text-danger" })
                            </div>
                            <div class="clearfix"></div>

                            <div class="form-group has-feedback col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <label>برند</label>
                                @Html.DropDownList("BrandId", ViewBag.BrandList as IEnumerable<SelectListItem>, null, new { @class = "form-control selectpicker", data_live_search = "true" })
                                <span class="fa fa-list form-control-feedback right" aria-hidden="true"></span>
                                @Html.ValidationMessageFor(model => model.BrandId, "", new { @class = "text-danger" })
                            </div>
                            @*<div class="form-group has-feedback col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                <label>وضعیت موجودی</label>
                                @Html.DropDownList("ProductStateId", ViewBag.ProductStateList as IEnumerable<SelectListItem>, null, new { @class = "form-control selectpicker", data_live_search = "true" })
                                <span class="fa fa-list form-control-feedback right" aria-hidden="true"></span>
                                @Html.ValidationMessageFor(model => model.ProductStateId, "", new { @class = "text-danger" })
                            </div>*@
                            <div class="form-group has-feedback col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <label>آیکن وضعیت</label>
                                @Html.DropDownList("ProductIconId", ViewBag.ProductIconList as IEnumerable<SelectListItem>, "--هیچکدام--", new { @class = "form-control selectpicker", data_live_search = "true" })
                                <span class="fa fa-list form-control-feedback right" aria-hidden="true"></span>
                                @Html.ValidationMessageFor(model => model.ProductIconId, "", new { @class = "text-danger" })
                            </div>
                            <div class="clearfix"></div>

                            <div class="form-group">
                                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                    <p>
                                        <span class="ContentDescr"></span> کاراکتر باقی مانده.
                                        <span data-html="true" data-toggle="tooltip" data-placement="left" class="glyphicon glyphicon-question-sign" title="@(HelpModuleSection.HelpModuleSectionFields.Where(x=>x.Name== "توضیحات متای گوگل").Any()? Html.Raw(HelpModuleSection.HelpModuleSectionFields.Where(x=>x.Name== "توضیحات متای گوگل").First().Data).ToHtmlString():Html.Raw("").ToHtmlString())"></span>
                                        <span>توضیحات متای گوگل</span>

                                    </p>
                                    @Html.TextAreaFor(model => model.Descr, htmlAttributes: new { id = "ContentDescr", @class = "form-control", rows = "4", placeholder = "توضیحات متای گوگل" })
                                    @Html.ValidationMessageFor(model => model.Descr, "", new { @class = "text-danger" })
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                    <p>
                                        <span data-html="true" data-toggle="tooltip" data-placement="left" class="glyphicon glyphicon-question-sign" title="@(HelpModuleSection.HelpModuleSectionFields.Where(x=>x.Name== "چکیده").Any()? Html.Raw(HelpModuleSection.HelpModuleSectionFields.Where(x=>x.Name== "چکیده").First().Data).ToHtmlString():Html.Raw("").ToHtmlString())"></span>
                                        <span>چکیده</span>

                                    </p>
                                    @Html.TextAreaFor(model => model.Abstract, htmlAttributes: new { @class = "form-control", rows = "4", placeholder = "چکیده" })
                                    @Html.ValidationMessageFor(model => model.Abstract, "", new { @class = "text-danger" })

                                </div>
                                <div class="clearfix"></div>
                            </div>


                            <br /><br />
                            <div class="form-group col-md-12">
                                <div>

                                    @Ajax.ActionLink("استفاده از فایل ها", "OpenAttachement", "FileManager", null, new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "createView", OnBegin = "$('.loading').show();", OnSuccess = "$('.loading').hide();createMode('',1)", InsertionMode = InsertionMode.Replace }, htmlAttributes: new { @class = "btn btn-primary OpenFileManager", @style = "margin-bottom:0" })
                                    <span data-html="true" data-toggle="tooltip" data-placement="left" class="glyphicon glyphicon-question-sign" title="@(HelpModuleSection.HelpModuleSectionFields.Where(x=>x.Name== "محتوا").Any()? Html.Raw(HelpModuleSection.HelpModuleSectionFields.Where(x=>x.Name== "محتوا").First().Data).ToHtmlString():Html.Raw("").ToHtmlString())"></span>

                                    @Html.LabelFor(model => model.Data, htmlAttributes: new { @class = "control-label", @style = "display:inline" })
                                </div>
                                <div id="createView"></div>
                                @Html.TextAreaFor(model => model.Data, htmlAttributes: new { Id = "txt_Content", @class = "form-control elm1", rows = "5" })
                                @Html.ValidationMessageFor(model => model.Data, "", new { @class = "text-danger" })


                            </div>
                            <div class="clearfix"></div>
                            @*<div class="form-group col-md-6">
                                    <div>
                                        @Ajax.ActionLink("انتخاب یا آپلود", "OpenAttachement", "FileManager", null, new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "createView", OnBegin = "$('.loading').show();", OnSuccess = "$('.loading').hide();createMode('',2)", InsertionMode = InsertionMode.Replace }, htmlAttributes: new { @class = "btn btn-primary OpenFileManager" })
                                        <label>تصویر اصلی ( ابعاد 1280*1280 پیکسل )</label>
                                        <div id="AttachementContainer" class="AttachementContainer">
                                            @if (Model != null && Model.ProductImages.Any())
                                        {

                                            @Html.Displayattachment(Model.ProductImages.First().Image.FileName, "SM", htmlAttributes: new { @class = "img-responsive", width = "220", height = "120", style = "display:inline-block;width:220px;height:120px" })
                                                @Html.TextBox("Cover", Model.ProductImages.First().AttachementId, new { data_val = "true", data_val_required = "تصویر اصلی باید انتخاب شود", @class = "form-control text-left Ltr", @readonly = "readonly" })

                                            }
                                            else
                                            {
                                                <img src="~/Content/Default/images/default-thumbnail.jpg" class="img-responsive" width="220" height="120" style="display:inline-block;width:220px;height:120px" />
                                                @Html.TextBox("Cover", null, new { data_val = "true", data_val_required = "تصویر اصلی باید انتخاب شود", @class = "form-control text-left Ltr", @readonly = "readonly" })
                                            }
                                        </div>


                                    </div>

                                </div>*@
                            <div class="form-group col-md-6">
                                <div>

                                    <label style="display:block">تصاویر جانبی ( ابعاد 1280*1280 پیکسل )</label>
                                    <div class="File-Container">
                                        <ul class="nav navbar-nav navbar-right Upload-container">
                                            <li>
                                                <a href="javascript:;" class="btn-success user-profile dropdown-toggle" data-toggle="dropdown">
                                                    <span class="fa fa-camera"></span>
                                                    <span class="fa fa-plus"></span>
                                                </a>
                                                <ul class="dropdown-menu dropdown-usermenu pull-right">
                                                    <li role="presentation" class="dropdown-header">آپلود</li>
                                                    <li class="fileinput-button  fileinput-button">

                                                        <span class="fa fa-upload"></span> <a class="openFileFromComputer" href="#"> از کامپیوتر </a>
                                                        <form id="FormMultipleUpload2" enctype="multipart/form-data" method="post">
                                                            <input type="file" name="UploadedFiles2" id="UploadedFiles2" multiple />
                                                        </form>
                                                        <div class="progress CustomProgress hide">
                                                            <div id="FileProgress2" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
                                                                <span></span>
                                                            </div>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <span class="fa fa-link"></span> @Ajax.ActionLink("از فایل ها", "OpenAttachement", "FileManager", null, new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "createView", OnBegin = "$('.loading').show();", OnSuccess = "$('.AttachementContainer').removeClass('hide');$('.loading').hide();createMode('AttachementContainer2',2)", InsertionMode = InsertionMode.Replace }, htmlAttributes: new { @class = "OpenFileManager AttachementContainer2" })
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>

                                        <div id="AttachementContainer2" class="AttachementContainer AttachementContainer2 hide">
                                            <img src="~/Content/Default/images/default-thumbnail2.jpg" class="img-responsive" width="84" height="78" />
                                            <input type="text" class="form-control text Ltr" readonly />

                                            <input type="button" id="Addjanebi" value="افزودن به لیست" class="btn btn-primary" style="display:block" />
                                        </div>

                                        <ul id="janebi-images">
                                            @if (Model != null)
                                            {
                                                foreach (var item in Model.ProductImages.Where(x => x.IsImage && !x.ProductPriceId.HasValue).OrderBy(x => x.DisplaySort))
                                                {
                                                    <li data-id="@item.AttachementId">
                                                        <span class="glyphicon glyphicon-remove remove-janebi" data-id="@item.AttachementId"></span><a class="dettail" href="/Admin/FileManager/Edit/@item.AttachementId" target="_blank"><span class="glyphicon glyphicon-list" title="جزئیات"></span></a><input type="checkbox" title="تصویر پیش فرض" data-id="@item.AttachementId" checked="@(item.IsMain?true:false)" /><br /><a href="~/Content/Uploadfiles/@item.Image.FileName" target='_blank'><img src="~/Content/Uploadfiles/@item.Image.FileName" width='84' height='78' /></a><input type='hidden' name='janebi' value="@item.AttachementId" />
                                                        @if (item.IsMain)
                                                        {
                                                            <input type='hidden' class='DefaultImage' name='mainJanebi' value='@item.AttachementId'>
                                                        }
                                                    </li>
                                                }
                                            }
                                        </ul>

                                    </div>
                                </div>



                            </div>

                            <div class="form-group col-md-6">
                                <div>
                                    <label style="display:block">ویدئو</label>
                                    @Ajax.ActionLink("انتخاب یا آپلود", "OpenAttachement", "FileManager", null, new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "createView", OnBegin = "$('.loading').show();", OnSuccess = "$('.loading').hide();createMode('AttachementContainer4',4)", InsertionMode = InsertionMode.Replace }, htmlAttributes: new { @class = "btn btn-primary OpenFileManager AttachementContainer4" })
                                    @if (Model != null)
                                    {
                                        <span class="btn btn-danger deleteCover @(Model.Video.HasValue ? "" : "hide")">عدم انتخاب</span>
                                    }
                                    <div id="AttachementContainer4" class="AttachementContainer">
                                        @if (Model != null)
                                        {
                                            if (Model.Video.HasValue)
                                            {

                                                <a href="~/Content/UploadFiles/@Model.VideoAttachment.FileName" target="_blank">@Model.VideoAttachment.Title</a>
                                                <input id="Video" name="Video" type="text" class="form-control text-left Ltr" readonly value="@Model.Video" />
                                            }
                                            else
                                            {

                                                <a href="#" target="_blank"></a>
                                                <input id="Video" name="Video" type="text" class="form-control text-left Ltr" readonly />
                                            }
                                        }
                                        else
                                        {

                                            <a href="#" target="_blank"></a>
                                            <input id="Video" name="Video" type="text" class="form-control text-left Ltr" readonly />
                                        }
                                    </div>
                                </div>

                                <div>
                                    @Html.LabelFor(model => model.bon, htmlAttributes: new { @class = "control-label", @style = "display:block" })
                                    @Html.EditorFor(model => model.bon, new { htmlAttributes = new { placeholder = Html.DisplayNameFor(x => x.bon), @class = "form-control" } })
                                </div>
                                <div>
                                    @Html.LabelFor(model => model.bonMaxBasket, htmlAttributes: new { @class = "control-label", @style = "display:block" })
                                    @Html.EditorFor(model => model.bonMaxBasket, new { htmlAttributes = new { placeholder = Html.DisplayNameFor(x => x.bonMaxBasket), @class = "form-control" } })
                                </div>
                            </div>

                            <div class="clearfix"></div>
                        </div>
                    </div>
                    <div id="package" class="tab-pane fade">

                        @if (validType)
                        {
                            <div>
                                <div class="form-group has-feedback col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                    @Html.LabelFor(model => model.Width, htmlAttributes: new { @class = "control-label", @style = "display:block" })
                                    @Html.EditorFor(model => model.Width, new { htmlAttributes = new { placeholder = "عرض بسته", @class = "form-control" } })
                                    <span class="fa fa-text-width form-control-feedback right" aria-hidden="true"></span>
                                    @Html.ValidationMessageFor(model => model.Width, "", new { @class = "text-danger" })
                                </div>
                                <div class="form-group has-feedback col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                    @Html.LabelFor(model => model.Height, htmlAttributes: new { @class = "control-label", @style = "display:block" })
                                    @Html.EditorFor(model => model.Height, new { htmlAttributes = new { placeholder = "ارتفاع بسته", @class = "form-control" } })
                                    <span class="fa fa-text-height form-control-feedback right" aria-hidden="true"></span>
                                    @Html.ValidationMessageFor(model => model.Height, "", new { @class = "text-danger" })
                                </div>
                                <div class="form-group has-feedback col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                    @Html.LabelFor(model => model.Lenght, htmlAttributes: new { @class = "control-label", @style = "display:block" })
                                    @Html.EditorFor(model => model.Lenght, new { htmlAttributes = new { placeholder = "طول بسته", @class = "form-control" } })
                                    <span class="fa fa-leaf form-control-feedback right" aria-hidden="true"></span>
                                    @Html.ValidationMessageFor(model => model.Lenght, "", new { @class = "text-danger" })
                                </div>
                                <div class="form-group has-feedback col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                    @Html.LabelFor(model => model.ProductWeight, htmlAttributes: new { @class = "control-label", @style = "display:block" })
                                    @Html.EditorFor(model => model.ProductWeight, new { htmlAttributes = new { placeholder = "وزن بسته", @class = "form-control" } })
                                    <span class="fa fa-krw form-control-feedback right" aria-hidden="true"></span>
                                    @Html.ValidationMessageFor(model => model.ProductWeight, "", new { @class = "text-danger" })
                                </div>
                                <div class="form-group has-feedback col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                    @Html.LabelFor(model => model.ExtraSendPrice, htmlAttributes: new { @class = "control-label", @style = "display:block" })
                                    @Html.EditorFor(model => model.ExtraSendPrice, new { htmlAttributes = new { Value = (Model != null ? Model.ExtraSendPrice.ToString() : "0"), placeholder = "هزینه اضافی حمل (برای یک قلم)", @class = "form-control" } })
                                    <span class="fa fa-money form-control-feedback right" aria-hidden="true"></span>
                                </div>

                                <div class="form-group has-feedback col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                    <label>روش های ارسال</label>
                                    @if (Model == null)
                                    {
                                        @Html.DropDownList("ProductSendWayId", ViewBag.ProductSendWayList as IEnumerable<SelectListItem>, new { data_val = "true", data_val_required = "روش های ارسال باید انتخاب شود", @class = "form-control selectpicker", data_live_search = "true", multiple = "multiple" })
                                    }
                                    else
                                    {
                                        if (Model.ProductTypeId < 3)
                                        {
                                            @Html.DropDownList("ProductSendWayId", ViewBag.ProductSendWayList as IEnumerable<SelectListItem>, new { data_val = "true", data_val_required = "روش های ارسال باید انتخاب شود", @class = "form-control selectpicker", data_live_search = "true", multiple = "multiple" })
                                        }
                                        else
                                        {
                                            @Html.DropDownList("ProductSendWayId", ViewBag.ProductSendWayList as IEnumerable<SelectListItem>, new { @class = "form-control selectpicker", data_live_search = "true", multiple = "multiple" })

                                        }

                                    }
                                    <span class="fa fa-send-o form-control-feedback right" aria-hidden="true"></span>
                                </div>
                                <div class="clearfix"></div>
                                <div class="form-group has-feedback col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                    @if (Model == null)
                                    {

                                        @Html.CheckBoxFor(model => model.CancelFreeSend, new { @class = "js-switch" }) @Html.DisplayNameFor(x => x.CancelFreeSend)
                                    }
                                    else
                                    {

                                        @Html.CheckBoxFor(model => model.CancelFreeSend, new { @checked = Model.CancelFreeSend, @class = "js-switch" }) @Html.DisplayNameFor(x => x.CancelFreeSend)
                                    }
                                </div>
                            </div>
                        }
                    </div>
                    <div id="pack" class="tab-pane fade">

                    </div>
                    @if (Model != null)
                    {
                        <div id="files" class="tab-pane fade">

                        </div>
                        <div id="courses" class="tab-pane fade">
                            <div>
                                <div class="col-md-6">
                                    <div id="Lessons">
                                        <fieldset>
                                            <legend>سرفصل ها</legend>
                                            <div>
                                                <input id="txtNewLesson" type="text" placeholder="--تایپ نمایید--" class="form-control" /><br />
                                                <input type="button" id="AddNewCourse" class="btn btn-primary" value="افزودن سرفصل جدید" />
                                            </div>
                                        </fieldset>
                                    </div>
                                    <hr /><hr />
                                    <div id="Courses">
                                        <fieldset>
                                            <legend>درس ها</legend>
                                            <div>
                                                <div>
                                                    <label>سرفصل:</label><br />
                                                    @Html.DropDownList("CourseId", ViewBag.ProductCourses as IEnumerable<SelectListItem>, new { @class = "form-control selectpicker", data_live_search = "true" })
                                                </div><br />
                                                <div>
                                                    <label>عنوان:</label><br />
                                                    <input type="text" id="LessonTitle" class="form-control" />
                                                </div><br />
                                                <div>
                                                    <label>توصیحات مختصر:</label><br />
                                                    <textarea type="text" id="LessonDescription" class="form-control"></textarea>
                                                </div><br />
                                                <div class="col-md-6">
                                                    <label>ظرفیت (مگابایت):</label><br />
                                                    <input type="number" id="LessonCapacity" class="form-control" />
                                                </div>
                                                <div class="col-md-6">
                                                    <label>مدت زمان (ثانیه):</label><br />
                                                    <input type="number" id="LessonDuration" class="form-control" />
                                                </div>
                                                <div class="clearfix"></div><br />
                                                <div class="col-md-6">
                                                    <label>قیمت (اگر رایگان=0):</label><br />
                                                    <input type="number" id="LessonPrice" class="form-control" />
                                                </div>
                                                <div class="col-md-6">
                                                    <label>انتخاب ویدئو:</label><br />
                                                    @Ajax.ActionLink("انتخاب یا آپلود", "OpenAttachement", "FileManager", null, new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "createView", OnBegin = "$('.loading').show();", OnSuccess = "$('.loading').hide();createMode('AttachementContainer3',4)", InsertionMode = InsertionMode.Replace }, htmlAttributes: new { @class = "btn btn-primary OpenFileManager AttachementContainer3" })
                                                    <div id="AttachementContainer3" class="AttachementContainer">
                                                        <a href="#" target="_blank"></a>
                                                        <input id="CourseLessonVideo" type="text" class="form-control text-left Ltr" readonly />
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>

                                                <br /><br /><input type="button" id="AddLesson" class="btn btn-primary" value="افزودن درس" />
                                            </div>
                                        </fieldset>

                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <fieldset>
                                        <legend>سرفصل ها و درس های این محصول</legend>
                                        <div id="CourseLists">
                                            @foreach (var item in Model.ProductCourses)
                                            {
                                                <div class="CourseList" data-id="@item.Id">
                                                    <h3> <span class="glyphicon glyphicon-remove" data-id="@item.Id"></span> <span class="glyphicon glyphicon-edit" data-id="@item.Id"></span> <label>@item.Title</label></h3>

                                                    <ul>
                                                        @foreach (var item2 in item.ProductCourseLessons)
                                                        {
                                                            <li data-id="@item2.Id">
                                                                <div class="Operation col-md-3"><span class="glyphicon glyphicon-remove" data-id="@item2.Id"></span> <span class="glyphicon glyphicon-edit" data-id="@item2.Id"></span></div>
                                                                <div class="Title col-md-3">@item2.Title</div>
                                                                <div class="Duration col-md-3">@item2.Duration</div>
                                                                <div class="Video col-md-3"><a href="~/Content/UploadFiles/@item2.Attachement.FileName"><span class="fa fa-download"></span></a></div>
                                                                <div class="clearfix"></div>
                                                            </li>
                                                        }
                                                    </ul>
                                                </div>
                                            }
                                        </div>
                                    </fieldset>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                        <div id="attributes" class="tab-pane fade">
                            <span class="btn btn-primary" id="Update-Attribute"><span class="fa fa-edit"></span> بروزرسانی خصوصیات </span>
                            <div id="ErrorSummary"></div>
                            <div>
                                <div class="form-group has-feedback">

                                    <div id="ContentView"></div>
                                    <div id="ProductView"></div>
                                    @if (ProductAttributeGroups != null)
                                    {
                                        int c = 0;
                                        foreach (var item in ProductAttributeGroups.GroupBy(x => x.GroupId).Select(x => x.AsEnumerable()))
                                        {
                                            int? keyid = null;
                                            if (item.First().GroupId != null)
                                            {
                                                <h2 class="AttributeHeader" data-id="@item.First().GroupId"><span>@item.First().ProductAttributeGroup.Title</span></h2>
                                                keyid = item.First().GroupId;
                                            }
                                            else
                                            {

                                                <h2 class="AttributeHeader" data-id="null"><span>بدون دسته</span></h2>
                                            }
                                            <div class="ProductAttributeGroups hide">
                                                @foreach (var item2 in ProductAttributeGroups.Where(x => x.GroupId == keyid).OrderBy(x => x.DisplayOrder))
                                                {
                                                    var Values = Model.ProductAttributeSelects.Where(x => x.ProductAttributeCategorySelectId == item2.Id);

                                                    <div class="col-md-6">
                                                        <div class="col-md-5 AttributeName">
                                                            @if (item2.ProductAttribute.DataType == 5)
                                                            {
                                                                <span> استفاده؟ </span><input type="checkbox" class="checkbox-selector" @(Values.Any() ? "checked" : "") />
                                                            }
                                                            <span> @item2.ProductAttribute.Name</span>


                                                        </div>
                                                        <div class="col-md-7 ProductAttribute" data-id="@item2.Id" data-Attribute-Id="@item2.AttributeId" data-HasMultipleValue="@item2.ProductAttribute.HasMultipleValue" data-IsRequired="false" data-Type-Id="@item2.ProductAttribute.DataType">
                                                            @switch (item2.ProductAttribute.DataType)
                                                            {
                                                                case 1:
                                                                case 2:
                                                                case 16:
                                                                case 17:
                                                                case 18:
                                                                    if (!item2.ProductAttribute.HasMultipleValue)
                                                                    {
                                                                        if (Values.Any())
                                                                        {
                                                                            <input class="form-control" value="@Values.First().Value" type="number" data-type="@item2.ProductAttribute.DataType" data-id="Item-@item2.Id" data-product-Id="@Model.Id" /><span class="unit">@item2.ProductAttribute.Unit</span>
                                                                        }
                                                                        else
                                                                        {
                                                                            <input class="form-control" type="number" data-type="@item2.ProductAttribute.DataType" data-id="Item-@item2.Id" data-product-Id="@Model.Id" /><span class="unit">@item2.ProductAttribute.Unit</span>
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        <input class="form-control" type="number" data-type="@item2.ProductAttribute.DataType" data-id="Item-@item2.Id" data-product-Id="@Model.Id" /><span class="unit">@item2.ProductAttribute.Unit</span>

                                                                        <div class="MultipleValuesContainer">
                                                                            <a class="btn btn-info"> افزودن به لیست </a>
                                                                            <div class="MultipleValues">
                                                                                @if (Values.Any())
                                                                                {
                                                                                    foreach (var val in Values)
                                                                                    {
                                                                                        <span data-type="@item2.ProductAttribute.DataType" class='selectedValue'><span class='glyphicon glyphicon-remove' style='cursor:pointer'></span>@val.Value</span>
                                                                                    }
                                                                                }

                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    break;
                                                                case 3:
                                                                case 13:
                                                                case 14:
                                                                    if (!item2.ProductAttribute.HasMultipleValue)
                                                                    {
                                                                        if (Values.Any())
                                                                        {
                                                                            <input class="form-control" value="@Values.First().Value" type="text" data-type="@item2.ProductAttribute.DataType" data-id="Item-@item2.Id" data-product-Id="@Model.Id" /><span class="unit">@item2.ProductAttribute.Unit</span>
                                                                        }
                                                                        else
                                                                        {
                                                                            <input class="form-control" type="text" data-type="@item2.ProductAttribute.DataType" data-id="Item-@item2.Id" data-product-Id="@Model.Id" /><span class="unit">@item2.ProductAttribute.Unit</span>
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        <input class="form-control" type="text" data-type="@item2.ProductAttribute.DataType" data-id="Item-@item2.Id" data-product-Id="@Model.Id" /><span class="unit">@item2.ProductAttribute.Unit</span>

                                                                        <div class="MultipleValuesContainer">
                                                                            <a class="btn btn-info"> افزودن به لیست </a>
                                                                            <div class="MultipleValues">
                                                                                @if (Values.Any())
                                                                                {
                                                                                    foreach (var val in Values)
                                                                                    {
                                                                                        <span data-type="@item2.ProductAttribute.DataType" class='selectedValue'><span class='glyphicon glyphicon-remove' style='cursor:pointer'></span>@val.Value</span>
                                                                                    }
                                                                                }

                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    break;
                                                                case 4:
                                                                    if (Values.Any())
                                                                    {
                                                                        <textarea data-type="@item2.ProductAttribute.DataType" data-id="Item-@item2.Id" data-product-Id="@Model.Id" rows="4">@Values.First().Value</textarea>
                                                                    }
                                                                    else
                                                                    {

                                                                        <textarea data-type="@item2.ProductAttribute.DataType" data-id="Item-@item2.Id" data-product-Id="@Model.Id" rows="4"></textarea>
                                                                    }
                                                                    break;
                                                                case 5:
                                                                    if (Values.Any())
                                                                    {
                                                                        if (Values.First().Value == "1")
                                                                        {
                                                                            <input checked type="checkbox" id="@("Item" + item2.ProductAttribute.Id)" data-type="@item2.ProductAttribute.DataType" data-id="Item-@item2.Id" data-product-Id="@Model.Id" /><span> @item2.ProductAttribute.Unit </span> break;

                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="checkbox" id="@("Item" + item2.ProductAttribute.Id)" data-type="@item2.ProductAttribute.DataType" data-id="Item-@item2.Id" data-product-Id="@Model.Id" /><span> @item2.ProductAttribute.Unit </span> break;

                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        <input type="checkbox" id="@("Item"+item2.ProductAttribute.Id)" data-type="@item2.ProductAttribute.DataType" data-id="Item-@item2.Id" data-product-Id="@Model.Id" disabled /><span> @item2.ProductAttribute.Unit </span> break;
                                                                    }
                                                                case 6:
                                                                    <span class="fa fa-calendar" aria-hidden="true" style="cursor:pointer" onclick="displayDatePicker('Item-@item2.ProductAttribute.Id');"></span>
                                                                    <span class="fa fa-clock-o timeSelector" data-id-selector="@("Item-"+item2.ProductAttribute.Id)" style="cursor:pointer" alt="انتخاب زمان" title="انتخاب زمان" aria-hidden="true"></span>
                                                                    if (Values.Any())
                                                                    {
                                                                        <input class="form-control" data-type="@item2.ProductAttribute.DataType" readonly type="text" value="@CoreLib.Infrastructure.DateTime.DateTimeConverter.ChangeMiladiToShamsi(Convert.ToDateTime(Values.First().Value)) @CoreLib.Infrastructure.DateTime.DateTimeConverter.ChangeMiladiToShamsiTime(Convert.ToDateTime(Values.First().Value))" data-id="Item-@item2.ProductAttribute.Id" data-product-Id="@Model.Id" name="Item-@item2.ProductAttribute.Id" id="Item-@item2.ProductAttribute.Id" /><span> @item2.ProductAttribute.Unit </span>

                                                                    }
                                                                    else
                                                                    {
                                                                        <input class="form-control" data-type="@item2.ProductAttribute.DataType" readonly type="text" data-id="Item-@item2.ProductAttribute.Id" data-product-Id="@Model.Id" name="Item-@item2.ProductAttribute.Id" id="Item-@item2.ProductAttribute.Id" /><span> @item2.ProductAttribute.Unit </span>

                                                                    }
                                                                    break;
                                                                case 7:
                                                                    string jsload = string.Format("$('.loading').hide();createMode('Item-{0}',{1})", item2.ProductAttribute.Id, 2);
                                                                    @Ajax.ActionLink("انتخاب یا آپلود", "OpenAttachement", "FileManager", null, new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "createView", OnBegin = "$('.loading').show();", OnSuccess = jsload, InsertionMode = InsertionMode.Replace }, htmlAttributes: new { @class = "btn btn-primary OpenFileManager AttachementContainer3 Item-" + item2.ProductAttribute.Id })
                                                                    <span style="cursor:pointer" class="btn btn-danger removePic">حذف</span>

                                                                    if (!item2.ProductAttribute.HasMultipleValue)
                                                                    {
                                                                        if (Values.Any())
                                                                        {
                                                                            <div class="AttachementContainer text-left">
                                                                                @*@Html.Displayattachment(new Guid(Values.First().Value), "MD", new { @class = "img-responsive", width = "227", height = "120", style = "display:inline-block;width:227px;height:120px" });*@
                                                                                <input value="@Values.First().Value" title="@Values.First().Value" type="text" class="form-control text-left Ltr" readonly name="@("Item-"+item2.ProductAttribute.Id)" id="@("Item-"+item2.ProductAttribute.Id)" />
                                                                            </div>
                                                                        }
                                                                        else
                                                                        {

                                                                            <div class="AttachementContainer text-left">
                                                                                <img src="" class="img-responsive" width="227" height="120" style="display:inline-block;width:227px;height:120px" />
                                                                                <input type="text" class="form-control text-left Ltr" readonly name="@("Item-"+item2.ProductAttribute.Id)" id="@("Item-"+item2.ProductAttribute.Id)" />
                                                                            </div>
                                                                        }
                                                                    }
                                                                    else
                                                                    {

                                                                        <div class="AttachementContainer text-left">
                                                                            <img src="" class="img-responsive" width="227" height="120" style="display:inline-block;width:227px;height:120px" />
                                                                            <input type="text" class="form-control text-left Ltr" readonly name="@("Item-"+item2.ProductAttribute.Id)" id="@("Item-"+item2.ProductAttribute.Id)" />
                                                                        </div>
                                                                        <div class="MultipleValuesContainer">
                                                                            <a class="btn btn-info"> افزودن به لیست </a>
                                                                            <div class="MultipleValues">
                                                                                @if (Values.Any())
                                                                                {
                                                                                    foreach (var val in Values)
                                                                                    {
                                                                                        <span data-type="@item2.ProductAttribute.DataType" data-value="@val.Value" class='selectedValue'><span class='glyphicon glyphicon-remove' style='cursor:pointer'></span> @Html.DisplayFileAttribute(new Guid(val.Value)) </span>
                                                                                    }
                                                                                }

                                                                            </div>
                                                                        </div>

                                                                    }
                                                                    break;
                                                                case 8:
                                                                case 15:
                                                                    <select id="@("Item-"+item2.ProductAttribute.Id)" class="form-control">
                                                                        <option data-AttributeId="0" data-id="0" value="0" selected>--انتخاب نمایید--</option>
                                                                        @foreach (var ListItem in item2.ProductAttribute.ProductAttributeItems)
                                                                        {
                                                                            if (Values.Any())
                                                                            {
                                                                                if (Convert.ToInt32(Values.First().Value) == ListItem.Id)
                                                                                {

                                                                                    <option selected="selected" data-AttributeId="@ListItem.AttributeId" data-id="@ListItem.Id" value="@ListItem.Value">@ListItem.Value</option>
                                                                                }
                                                                                else
                                                                                {

                                                                                    <option data-AttributeId="@ListItem.AttributeId" data-id="@ListItem.Id" value="@ListItem.Value">@ListItem.Value</option>
                                                                                }
                                                                            }
                                                                            else
                                                                            {
                                                                                <option data-AttributeId="@ListItem.AttributeId" data-id="@ListItem.Id" value="@ListItem.Value">@ListItem.Value</option>
                                                                            }
                                                                        }

                                                                    </select>
                                                                    if (item2.ProductAttribute.HasMultipleValue)
                                                                    {
                                                                        <div class="MultipleValuesContainer">
                                                                            <a class="btn btn-info"> افزودن به لیست </a>
                                                                            <div class="MultipleValues">
                                                                                @foreach (var val in Values)
                                                                                {
                                                                                    <span data-type="@item2.ProductAttribute.DataType" data-value="@val.Value" class='selectedValue'><span class='glyphicon glyphicon-remove' style='cursor:pointer'></span>@Html.DisplaySelectAttribute(Convert.ToInt32(val.Value))</span>
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                    }


                                                                    break;
                                                                case 9:
                                                                    jsload = "$('.loading').hide();CreateContents('LinkContent-" + item2.ProductAttribute.Id + "')";
                                                                    @Ajax.ActionLink("انتخاب محتوا برای " + item2.ProductAttribute.Name, "OpenContents", "Products", null, new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "ContentView", OnBegin = "$('.loading').show();", OnSuccess = jsload, InsertionMode = InsertionMode.Replace }, htmlAttributes: new { @class = "btn btn-primary OpenContentManager Item-" + item2.ProductAttribute.Id })<br />

                                                                    if (!item2.ProductAttribute.HasMultipleValue)
                                                                    {
                                                                        <div class="@("LinkContent LinkContent-"+item2.ProductAttribute.Id)">
                                                                            @if (Values.Any())
                                                                            {
                                                                                <span data-type="@item2.ProductAttribute.DataType" data-value="@Values.First().Value" class='text text-success selectedValue'><span class='glyphicon glyphicon-remove' style="color:red;cursor:pointer"></span> @Html.DisplayContentAttribute(Convert.ToInt32(@Values.First().Value)) </span>
                                                                            }
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="@("LinkContent LinkContent-"+item2.ProductAttribute.Id)"></div>
                                                                        <div class="MultipleValuesContainer">
                                                                            <a class="btn btn-info"> افزودن به لیست </a>
                                                                            <div class="MultipleValues">
                                                                                @foreach (var value in Values)
                                                                                {
                                                                                    <span class="text text-success selectedValue" data-type="@item2.ProductAttribute.DataType" data-value="@value.Value"><span class='glyphicon glyphicon-remove' style="color:red;cursor:pointer"></span> @Html.DisplayContentAttribute(Convert.ToInt32(value.Value)) </span>
                                                                                }
                                                                            </div>
                                                                        </div>

                                                                    }
                                                                    break;
                                                                case 10:
                                                                    jsload = "$('.loading').hide();CreateProducts('LinkProduct-" + item2.ProductAttribute.Id + "')";
                                                                    @Ajax.ActionLink("انتخاب محصول برای " + item2.ProductAttribute.Name, "OpenProducts", "Products", new { ProductId = Model.Id }, new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "ProductView", OnBegin = "$('.loading').show();", OnSuccess = jsload, InsertionMode = InsertionMode.Replace }, htmlAttributes: new { @class = "btn btn-primary OpenProductManager Item-" + item2.ProductAttribute.Id })<br /><br />

                                                                    if (!item2.ProductAttribute.HasMultipleValue)
                                                                    {
                                                                        <div class="@("LinkProduct LinkProduct-"+item2.ProductAttribute.Id)">
                                                                            @if (Values.Any())
                                                                            {
                                                                                <p class="text text-success" data-id="@item2.ProductAttribute.Id"> <span class="glyphicon glyphicon-remove" style="color:red;cursor:pointer"></span> محصول با آی دی : @Values.First().Value</p>

                                                                            }
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="@("LinkProduct LinkProduct-"+item2.ProductAttribute.Id)">
                                                                        </div>
                                                                        <div class="MultipleValuesContainer">
                                                                            <a class="btn btn-info"> افزودن به لیست </a>
                                                                            <div class="MultipleValues">
                                                                                @foreach (var value in Values)
                                                                                {
                                                                                    <p class="text text-success" data-id="@item2.ProductAttribute.Id"> <span class="glyphicon glyphicon-remove" style="color:red;cursor:pointer"></span> محصول با آی دی : @value.Value</p>
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    break;
                                                                case 11:
                                                                case 12:
                                                                    <select id="@("Item-"+item2.ProductAttribute.Id)" class="form-control">
                                                                        <option data-AttributeId="0" data-id="0" value="0" selected>--انتخاب نمایید--</option>
                                                                        @foreach (var ListItem in item2.ProductAttribute.ProductAttributeItemColors)
                                                                        {
                                                                            if (Values.Any())
                                                                            {
                                                                                if (Convert.ToInt32(Values.First().Value) == ListItem.Id)
                                                                                {

                                                                                    <option selected="selected" data-AttributeId="@ListItem.AttributeId" data-id="@ListItem.Id" value="@ListItem.Value">@ListItem.Color</option>
                                                                                }
                                                                                else
                                                                                {

                                                                                    <option data-AttributeId="@ListItem.AttributeId" data-id="@ListItem.Id" value="@ListItem.Value">@ListItem.Color</option>
                                                                                }
                                                                            }
                                                                            else
                                                                            {
                                                                                <option data-AttributeId="@ListItem.AttributeId" data-id="@ListItem.Id" value="@ListItem.Value">@ListItem.Color</option>
                                                                            }
                                                                        }

                                                                    </select>
                                                                    if (item2.ProductAttribute.HasMultipleValue)
                                                                    {
                                                                        <div class="MultipleValuesContainer">
                                                                            <a class="btn btn-info"> افزودن به لیست </a>
                                                                            <div class="MultipleValues">
                                                                                @foreach (var val in Values)
                                                                                {
                                                                                    <span data-type="@item2.ProductAttribute.DataType" data-value="@val.Value" class='selectedValue'><span class='glyphicon glyphicon-remove' style='cursor:pointer'></span>@Html.DisplaySelectColorAttribute(Convert.ToInt32(val.Value))</span>
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    break;
                                                                default:
                                                                    <input />
                                                                    break;
                                                            }

                                                        </div>
                                                    </div>
                                                    c++;
                                                    if (c % 2 == 0)
                                                    {
                                                        <div class="clearfix"></div>
                                                    }
                                                }
                                                <div class="clearfix"></div>
                                            </div>
                                            c = 0;
                                        }
                                    }

                                </div>
                            </div>
                        </div>
                        <div id="ranks" class="tab-pane fade">
                            <div>
                                <div class="col-md-7">
                                    <fieldset>
                                        <legend>گروههای امتیازدهی موجود</legend>
                                        <div>
                                            @if (ProductRankGroupSelect != null)
                                            {
                                                foreach (var item in ProductRankGroupSelect.GroupBy(x => x.ProductRankGroup))
                                                {
                                                    <div class="RankGroup" data-id="@item.Key.Id">
                                                        <h3><input type="checkbox" data-id="@item.Key.Id" /> <span class="fa fa-plus"></span> @item.Key.Title </h3>
                                                        <ul>
                                                            @foreach (var item2 in ProductRankGroupSelect.Where(x => x.GroupId == item.Key.Id))
                                                            {
                                                                <li data-id="@item2.Id"><input checked="@(Model.ProductRankSelects!=null?Model.ProductRankSelects.Any(x=>x.ProductRankGroupId==item2.Id && x.ProductId==Model.Id)?true:false:false)" type="checkbox" data-id="@item2.Id" /> @item2.ProductRank.Name </li>
                                                            }
                                                        </ul>
                                                    </div>
                                                }
                                            }
                                        </div>
                                    </fieldset>

                                </div>
                                <div id="CurrentRanks" class="col-md-5">
                                    <fieldset>
                                        <legend>آیتم های امتیاز دهی انتخاب شده محصول</legend>
                                        <div>
                                            @if (Model != null)
                                            {
                                                if (Model.ProductRankSelects != null)
                                                {
                                                    <p class="alert alert-info">شما به عنوان مدیر سایت از بین آیتم های انتخاب شده می توانید امتیازدهی نمایید. یا امتیاز داده شده خود را تغییر دهید.</p>
                                                    <ul>
                                                        @foreach (var item in Model.ProductRankSelects)
                                                        {
                                                            <li data-id="@item.ProductRankGroupId">
                                                                <span class="fa fa-remove" data-id="@item.ProductRankGroupId"></span>&nbsp;<label class="CurrentRank">@item.ProductRankGroupSelect.ProductRank.Name</label><br />
                                                                <select>
                                                                    <option selected="@(ProductRankSelectValue!=null?ProductRankSelectValue.Any(x=>x.ProductRankSelectId==item.Id)?false:true:true)">--انتخاب نشده--</option>
                                                                    <option selected="@(ProductRankSelectValue!=null?ProductRankSelectValue.Any(x=>x.Value==1 && x.ProductRankSelectId==item.Id)?true:false:false)">1</option>
                                                                    <option selected="@(ProductRankSelectValue!=null?ProductRankSelectValue.Any(x=>x.Value==2 && x.ProductRankSelectId==item.Id)?true:false:false)">2</option>
                                                                    <option selected="@(ProductRankSelectValue!=null?ProductRankSelectValue.Any(x=>x.Value==3 && x.ProductRankSelectId==item.Id)?true:false:false)">3</option>
                                                                    <option selected="@(ProductRankSelectValue!=null?ProductRankSelectValue.Any(x=>x.Value==4 && x.ProductRankSelectId==item.Id)?true:false:false)">4</option>
                                                                    <option selected="@(ProductRankSelectValue!=null?ProductRankSelectValue.Any(x=>x.Value==5 && x.ProductRankSelectId==item.Id)?true:false:false)">5</option>
                                                                </select>
                                                            </li>
                                                        }
                                                    </ul>
                                                    <input type="button" value="ذخیره" id="Update-Primary-Rank" data-id="@Model.Id" class="btn btn-primary" />
                                                }
                                            }
                                        </div>
                                    </fieldset>

                                </div>
                                <div class="clearfix"></div>
                            </div>
                            <br /><br />
                            <div>
                                <fieldset class="col-md-12">
                                    <legend>نقاط قوت و ضعف</legend>
                                    <div>
                                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 advantages">
                                            <label id="lable-advantage">نقاط قوت</label>
                                            @foreach (var item in Model.ProductAdvantages)
                                            {
                                                <input type="text" class="form-control txbAdvantage" value="@item.Title" /> <span class="glyphicon glyphicon-plus-sign"></span> <text>&nbsp;</text> <span class="glyphicon glyphicon-minus-sign"></span>

                                            }
                                            <input type="text" class="form-control txbAdvantage" /> <span class="glyphicon glyphicon-plus-sign"></span> &nbsp; <span class="glyphicon glyphicon-minus-sign"></span>

                                        </div>
                                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 Disadvantages">
                                            <label id="lable-Disadvantage">نقاط ضعف</label>
                                            @foreach (var item in Model.ProductDisAdvantages)
                                            {
                                                <input type="text" class="form-control txbDisadvantage" value="@item.Title" /> <span class="glyphicon glyphicon-plus-sign"></span> <text>&nbsp;</text> <span class="glyphicon glyphicon-minus-sign"></span>

                                            }
                                            <input type="text" class="form-control txbDisadvantage" /> <span class="glyphicon glyphicon-plus-sign"></span> &nbsp; <span class="glyphicon glyphicon-minus-sign"></span>

                                        </div>
                                        <div class="clearfix"></div>
                                        <br />
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-right">
                                            <span data-id="@Model.Id" id="Add-Point" class="btn btn-success">ذخیره</span>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                </fieldset>


                            </div>
                        </div>
                        <div id="accs" class="tab-pane fade">

                        </div>
                        <div id="tags" class="tab-pane fade">
                            <div>
                                <fieldset>
                                    <legend class="Newlegend">
                                        برچسب ها

                                    </legend>
                                    <div class="NewFieldset" style="height:370px;overflow:auto;position:relative">

                                        <div class="text-left" style="position:absolute;top:0;left:3px"><span class="glyphicon glyphicon-remove"></span></div>
                                        <div id="TagContainer">
                                            <div class="col-lg-7 col-md-7 col-sm-12 col-xs-12">

                                                <div>
                                                    <br />
                                                    <input type="text" id="AddTagText" placeholder="نام برچسب..." class="form-control" style="width:50%;display:inline-block" />
                                                    <input type="button" style="margin-bottom:0" id="AddNewTag" value="افزودن برچسب جدید" class="btn btn-primary" />

                                                </div><br />
                                                <div class="search">
                                                    <input type="search" id="SearchTag" placeholder="برای جست و جو تایپ نمایید..." class="form-control" />
                                                    <hr style="margin:10px 0" />
                                                </div>
                                                <div class="Tagcontent" style="height:170px;overflow-y:auto;overflow-x:hidden">
                                                    @{
                                                        var tags = ViewBag.TagId as IEnumerable<Domain.Tag>;
                                                        var CurrentTagItems = ViewBag.CurrentTagItems as List<Domain.Tag>;
                                                        foreach (var item in tags)
                                                        {
                                                            <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12" style="padding:0">
                                                                @if (CurrentTagItems != null)
                                                                {
                                                                    <input type="checkbox" id="@item.TagName" name="@item.TagName" data-id="@item.Id" @(CurrentTagItems.Where(x => x.Id == item.Id).Any() ? "checked" : "") />
                                                                }
                                                                else
                                                                {
                                                                    <input type="checkbox" id="@item.TagName" name="@item.TagName" data-id="@item.Id" />
                                                                }
                                                                <label id="@item.Id" style="font-weight:normal">@item.TagName</label>
                                                            </div>
                                                        }
                                                        <div class="clearfix"></div>
                                                    }

                                                </div>
                                                <hr style="margin: 0" />
                                                <div class="Function" style="padding-top:5px">
                                                    <p id="tag-Message"></p>
                                                    <input type="button" id="SelectForContent" value="انتخاب برای این محصول" class="btn btn-primary" />
                                                    <input type="button" id="EditTag" value="ویرایش" class="btn btn-primary" />
                                                    <input type="button" id="DeleteTag" value="حذف" class="btn btn-danger" />
                                                    <input type="button" id="ResetTag" value="نمایش همه" class="btn btn-primary" />

                                                </div>
                                            </div>
                                            <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12" style="padding:1px">

                                                <br /><p> برچسب های انتخابی :  </p><hr />
                                                <div id="SelectedTags">
                                                    @{
                                                        if (ViewBag.CurrentTagItems != null)
                                                        {
                                                            <p> برچسب های انتخابی :  </p>
                                                            <hr>
                                                            foreach (Domain.Tag item in ViewBag.CurrentTagItems as List<Domain.Tag>)
                                                            {
                                                                <span><input type="hidden" name="TagId" id="@("Tag-" + item.Id)" value="@item.Id" /><span data-id="@item.Id" style="cursor:pointer" class="RemoveTagSelection glyphicon glyphicon-remove"></span> @item.TagName  &nbsp; &nbsp;</span>
                                                            }
                                                        }
                                                    }
                                                </div>
                                                <div id="SelectedTagsForEdit">

                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                    }
                </div>



            </div>
        }

        @section Scripts{
            <script>

                $('#ContentTitle').simplyCountable({ counter: '.ContentTitle', maxCount: 100, safeClass: 'safe', overClass: 'over' });
                $('#ContentPageAddress').simplyCountable({ counter: '.ContentPageAddress', maxCount: 80, safeClass: 'safe', overClass: 'over' });
                $('#ContentDescr').simplyCountable({ counter: '.ContentDescr', maxCount: 150, safeClass: 'safe', overClass: 'over' });
            </script>

            <script src="~/Areas/Admin/Content/Scripts/Component/Bootstrp-DropDown/bootstrap-select.min.js"></script>
            @*View*@
            <script src="~/Areas/Admin/Content/Scripts/View/CreateProduct.js?v=2.3.6"></script>
            <script src="~/Areas/Admin/Content/Scripts/View/ProductAttributeControl.js?v=1.5.5"></script>
            <script src="~/Areas/Admin/Content/Scripts/Component/MyContentManager.js"></script>
            <script src="~/Areas/Admin/Content/Scripts/Component/MyProductManager.js"></script>
            @*Product Category*@
            <script src="~/Areas/Admin/Content/Scripts/View/_CategoryManager.js"></script>
            <script src="~/Areas/Admin/Content/Scripts/Component/jquery-ui.min.js"></script>


            @Scripts.Render("~/bundles/Admin/FileManager/Js")
            <script src="~/Scripts/tinymce/tinymce.min.js"></script>
            <script src="~/Scripts/tinymce/tiny_mce_load.js"></script>

        }
    </div>
</div>
